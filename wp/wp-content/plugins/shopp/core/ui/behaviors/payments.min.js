jQuery(document).ready(function(e){e.each(gateways,function(t,n){e.template(n+"-editor",e("#"+n+"-editor"))});var t=!1,n=e("#payment-option-menu"),i=e("#no-payment-settings"),a=function(a){a&&a.preventDefault(),t&&t.cancel(!1),i.hide();var c=e(this),s=c.parents("tr").hide(),r=n.val().toLowerCase(),p=!!c.attr("href")&&c.attr("href").split("&")[1].split("=")[1].toLowerCase().split("-"),o=p?p[0]:r,l=p?p[1]:0,d=(!(p||!$ps[o])&&e.each($ps[o],function(e,t){isNaN(e)||l++}),$ps[o]&&$ps[o][l]?e.extend($ps[o][l],{instance:l}):e.extend($ps[o],{instance:l})),f=e.tmpl(o+"-editor",d),u=f.find("a.cancel");f.find("input.selectall-toggle").change(function(t){var n=e(this),i=n.parents("ul").find("input");i.attr("checked",n.attr("checked"))});0==s.size()&&(s=e("#payment-setting-"+p).hide()),n.get(0).selectedIndex=0,c.cancel=function(e){e&&e.preventDefault(),t=!1,f.remove(),s.fadeIn("fast"),i.size()>0&&i.show()},u.click(c.cancel),s.size()>0?f.insertAfter(s):f.prependTo("#payments-settings-table"),e(document).trigger(o+"Settings",[f]),quickSelects(f),t=c};e("#payments a.edit").click(a),e("#payment-option-menu").change(a),e("#payments a.delete").click(function(){return!!confirm($ps.confirm)})});